<a href="https://github.com/docsion/rfsh">
  <img alt="RFSH: Supercharge your shell scripts - Running shell scripts in batch, concurrently, fully customized with variable ." src="https://github.com/docsion/rfsh/blob/main/static/rfsh_banner_v5.png">
  <h1 align="left">RFSH</h1>
</a>

> a.k.a @RUNFLOW_SH

<p align="left">
  Supercharge your shell scripts - Run shell scripts in batch, concurrently, fully customized with variable .
</p>


## What is it?
At the first point of view, I want to create a tool which can help our team run the bash script easier, faster, safer, with clearly reports, so I build RFSH.

To me, the first ability of good software is privacy matter. I want to create a good software and I don't want to make rich by charging on things running on your own resources (your computer, your server, your cloud,...). So basically, RFSH will be free-forever for usage.

You put a .csv file, a bash script as a template file, RFSH will take care the rest, then you will receive the clearly reports after all. Things happen on your machine, safe and sound.

For **supercharge** features, you must include the [--auth-phrase](#--auth-phrase). You can renew it anytime, free & forever.

## Features
1. Concurrently run a template with values from a CSV file, url, github, google spreadsheets. [link](#basic).
2. Generate an all-in-one job file which contains input data, template script, command flags that can run anywhere [link](#help).
3. Send reports to remotely stream. Support: telegram (**supercharge**) [link](#basic).

## Sample
Run the following script to execute the basic sample. You can find the script, input data, template at [sample](https://github.com/docsion/rfsh/tree/main/sample):
 ```
curl https://raw.githubusercontent.com/docsion/rfsh/main/sample/892d2fc4-6294-11ee-bffe-f297ad799bdb.sh | sh
#
# |- generated by:
# |- $runflow --generate-job basic -i https://github.com/docsion/rfsh/blob/main/sample/sample.csv -t https://github.com/docsion/rfsh/blob/main/sample/sample.template
```

Console output:
 ```
[RFSH] 2023/10/04 - 16:01:22 |       RUN  |    111¬µs |    0% |       0 ‚úì  |       0 êÑÇ  |      4 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |       RUN  |    110¬µs |    0% |       0 ‚úì  |       0 êÑÇ  |      2 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |       RUN  |    102¬µs |    0% |       0 ‚úì  |       0 êÑÇ  |      1 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |       RUN  |    111¬µs |    0% |       0 ‚úì  |       0 êÑÇ  |      3 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |      GOOD  |      3ms |   12% |       1 ‚úì  |       0 êÑÇ  |      3 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |       RUN  |      3ms |   25% |       2 ‚úì  |       0 êÑÇ  |      4 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |       RUN  |      3ms |   25% |       2 ‚úì  |       0 êÑÇ  |      3 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |      GOOD  |      3ms |   25% |       2 ‚úì  |       0 êÑÇ  |      2 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |       RUN  |      4ms |   38% |       3 ‚úì  |       0 êÑÇ  |      4 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |      GOOD  |      4ms |   38% |       3 ‚úì  |       0 êÑÇ  |      3 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |      GOOD  |      5ms |   50% |       4 ‚úì  |       0 êÑÇ  |      3 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |       RUN  |      5ms |   50% |       4 ‚úì  |       0 êÑÇ  |      4 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |      GOOD  |      7ms |   62% |       5 ‚úì  |       0 êÑÇ  |      3 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |      GOOD  |      7ms |   75% |       6 ‚úì  |       0 êÑÇ  |      2 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |      GOOD  |      8ms |   88% |       7 ‚úì  |       0 êÑÇ  |      1 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |      GOOD  |      8ms |  100% |       8 ‚úì  |       0 êÑÇ  |      0 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] 2023/10/04 - 16:01:22 |    REPORT  |      8ms |  100% |       8 ‚úì  |       0 êÑÇ  |      0 ‚Ä£ |      0 ‚Ü©Ô∏é | /var/folders/f7/nj7_1pc15mj0st_k9vyq2yl80000gn/T/1750217848.csv

[RFSH] Done
```

## Install
Run the following install script to install the latest version of RFSH:
```
curl https://raw.githubusercontent.com/docsion/rfsh/main/i.sh | sh
```

## Command

### help
```
$ ./runflow help
runflow - Supercharge your shell scripts - Run shell scripts in batch, concurrently, fully customized with variable .
Usage: runflow [options...] command [options...]

Commands:
   basic    Execute a basic flow .
   version  Show the version .

Options:
   --generate-job       Generate an all-in-one job file which contains input data, template script, command flags that can run anywhere .
   --auth-phrase value  Provide an auth phrase to automatically authenticate the running flow as your *supercharge* .

Author:
   Beast. D <beast@docsion.com>

Copyright:
   (c) 2023 Docsion Team .
```

### basic
```
$ ./runflow basic
runflow basic - Execute a basic flow .
Usage: runflow basic [options...]

Description:
   Concurrently run a template with values from a CSV file .
   Example: $runflow basic -i sample.csv -t sample.template
   More info: https://github.com/docsion/rfsh/tree/main/sample

Options:
   --input value, -i value          CSV file with values in comma-separated format. Headers define variable names (e.g., id,content<new line>1,hey @RUNFLOW_SH here!). Support: file, url (http/https), github, spreadsheets (public shares) .
   --template value, -t value       Location of the Bash script template. Variables are in the format {{variable_name}} (e.g., echo {{id}} {{content}}). Support: file, url (http/https), github .
   --output value, -o value         Output file location .
   --concurrent value               Number of concurrent workers . (default: 4)
   --retries value                  Number of retries on failure . (default: 0)
   --dry-run                        Only print the script to --output that would execute, without executing it .
   --report-remote-stream value     *supercharge* Send reports to remotely stream. Support: telegram .
   --report-telegram-token value    Telegram Bot Token. More info: https://core.telegram.org/bots .
   --report-telegram-channel value  Telegram channel .
```

### --auth-phrase
> Provide an auth phrase to automatically authenticate the running flow as your *supercharge*

You can find the --auth-phrase [here](auth_phrase.txt) for the period running flows (phrase will be expired in 3 months). Or Buy me a coffee ($1) with [ a Lifetime --auth-phrase](https://docsion.com/product/rfsh) (481/500 remains, thanks to 19 supporters üôè)

### Github
You can import an input or a template file from Github repository. Note that if you use private repository, please set `GITHUB_TOKEN` environment variable before running $runflow command. For example:
 ```
GITHUB_TOKEN=<token> runflow basic -i https://github.com/my/privaterepo/blob/main/sample/sample.csv -t https://github.com/docsion/rfsh/blob/main/sample/sample.template
```

You can find Github guideline [here](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic) to generate new token.

## Support
- Beast. D <beast@docsion.com>
